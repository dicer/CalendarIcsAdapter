todo.txt for android.calendar.ics.adapter
=========

v push to f-droid-store
	v v1.5.1 wrong package name
	v v1.5.3 
		> waiting for deployment
	- v1.5.4 geplant 22.4.
v exportToIcs only for non-file
v sendTo with email-subject and content
	v intent-text/subject
	v format date
	v appVersion
v send via bluetooth workaround via public readable file
- receive bluetooth workaround
	- ask on stackoverflow

- main view with settings and about
	
? split a4.0 and a 2.1-

###############

How to import ics-calendar-files via android-bluetooth

Problem:

Android 2.2 (and may be other versions, too) blocks bluetooth-receiving of *.ics calendar files.
My android app wants to process ics-files coming in via bluetooth.

Background:

I am building an [andriod CalendarIcsAdapter](https://github.com/k3b/CalendarIcsAdapter/wiki) that 
should implement import ics-calendar-files via bluetooth.

I already have the code to analyse and import the content of a local ics-file 
and i can also export from calender to ics-file and send this via bluetooth or email.

But i cannot receive the ics-file via android-bluetooth.

If i transfer a file named "hello.txt" from my mswindows-laptop to my android 2.2 handset via bluetooth
the file is store in the bluetooth-sdcard-folder as expected.

If i rename the same file to hello.ics and try to transfer it via bluetooth
android refuses to process the file.

On my windows-laptop, I get this error message  (in german)
 
"Dieses Bluetooth-Gerät bzw. der Computer kann diesen Typ nicht verarbeiten".

that translates to "This bluetoothdevice or computer can not process this type."

Since android knows the fileextension ".ics" in order to block the file. Is 
there a way to handle bluetooth-in for ics content?

Is there somthing like a handler where my code has to register to or are there brodcasts my app has to reply to?

what i have tried

I first startet renaming the files from SomeName.ics to SomeName.ics_ and create an android service
that uses a android.os.FileObserver to monitor the bluetooth-directory for an incoming file.

* But i think this is overkill.
* My app would not be compatible with other bluetooth pc-apps and 
* it is too complicated to manually rename the ics file before sending it. 

Opening a serial rf-comm-in-bluetooth-connection would be only ok 
if you have clues/examplecode how to make this compatibel with other ics-calendar-bluetooth-transmitters.

Any ideas how i can do it? Is this a android 2.2 only issue. (i have no other device to verify this)

[update]

according to [wikipedia VCalendar](http://en.wikipedia.org/wiki/VCalendar) a calendar entry file may use
these file extensions: .ical; .ics; .ifb .icalendar

except .ics android let the others in. on my windows laptop the other file-extension are unknown.

android bluetooth calendar.

----------------------

http://developer.android.com/guide/topics/manifest/activity-alias-element.html

<activity-alias>

syntax:

    <activity-alias android:enabled=["true" | "false"]
                    android:exported=["true" | "false"]
                    android:icon="drawable resource"
                    android:label="string resource"
                    android:name="string"
                    android:permission="string"
                    android:targetActivity="string" >
        . . .
    </activity-alias>

contained in:
    <application>
can contain:
    <intent-filter>
    <meta-data>
description:
    An alias for an activity, named by the targetActivity attribute. The target must be in the same application as the alias and it must be declared before the alias in the manifest.

    The alias presents the target activity as a independent entity. It can have its own set of intent filters, and they, rather than the intent filters on the target activity itself, determine which intents can activate the target through the alias and how the system treats the alias. For example, the intent filters on the alias may specify the "android.intent.action.MAIN" and "android.intent.category.LAUNCHER" flags, causing it to be represented in the application launcher, even though none of the filters on the target activity itself set these flags.

    With the exception of targetActivity, <activity-alias> attributes are a subset of <activity> attributes. For attributes in the subset, none of the values set for the target carry over to the alias. However, for attributes not in the subset, the values set for the target activity also apply to the alias. 
attributes:

    android:enabled
        Whether or not the target activity can be instantiated by the system through this alias â€” "true" if it can be, and "false" if not. The default value is "true".

        The <application> element has its own enabled attribute that applies to all application components, including activity aliases. The <application> and <activity-alias> attributes must both be "true" for the system to be able to instantiate the target activity through the alias. If either is "false", the alias does not work. 
    android:exported
        Whether or not components of other applications can launch the target activity through this alias â€” "true" if they can, and "false" if not. If "false", the target activity can be launched through the alias only by components of the same application as the alias or applications with the same user ID.

        The default value depends on whether the alias contains intent filters. The absence of any filters means that the activity can be invoked through the alias only by specifying the exact name of the alias. This implies that the alias is intended only for application-internal use (since others would not know its name) â€” so the default value is "false". On the other hand, the presence of at least one filter implies that the alias is intended for external use â€” so the default value is "true". 
    android:icon
        An icon for the target activity when presented to users through the alias. See the <activity> element's icon attribute for more information. 
    android:label
        A user-readable label for the alias when presented to users through the alias. See the <activity> element's label attribute for more information.

    android:name
        A unique name for the alias. The name should resemble a fully qualified class name. But, unlike the name of the target activity, the alias name is arbitrary; it does not refer to an actual class.

    android:permission
        The name of a permission that clients must have to launch the target activity or get it to do something via the alias. If a caller of startActivity() or startActivityForResult() has not been granted the specified permission, the target activity will not be activated.

        This attribute supplants any permission set for the target activity itself. If it is not set, a permission is not needed to activate the target through the alias.

        For more information on permissions, see the Permissions section in the introduction. 
    android:targetActivity
        The name of the activity that can be activated through the alias. This name must match the name attribute of an <activity> element that precedes the alias in the manifest.

introduced in:
    API Level 1
see also:
    <activity>


